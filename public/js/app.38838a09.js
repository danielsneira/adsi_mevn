(function(t){function e(e){for(var o,n,r=e[0],l=e[1],c=e[2],d=0,m=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&m.push(i[n][0]),i[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},i={app:0},s=[];function n(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-2d216214":"40563de1","chunk-2d216257":"1eff1fbf","chunk-461b141f":"9843599e"}[t]+".js"}function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var o=new Promise((function(e,o){a=i[t]=[e,o]}));e.push(a[2]=o);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=n(t);var c=new Error;s=function(e){l.onerror=l.onload=null,clearTimeout(d);var a=i[t];if(0!==a){if(a){var o=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",c.name="ChunkLoadError",c.type=o,c.request=s,a[1](c)}i[t]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"08b3":function(t,e,a){"use strict";a("20e7")},"20e7":function(t,e,a){},"3d1b":function(t,e,a){},"40e1":function(t,e,a){"use strict";a("973f")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),i=a("bc3a"),s=a.n(i),n=a("2106"),r=a.n(n),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-navigation-drawer",{attrs:{app:"",temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",[a("v-list-item",{attrs:{to:"/",replace:"",link:""}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-home")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Home")])],1)],1),a("v-divider"),"ADMIN_ROL"===this.$store.state.rol||"ALMACENISTA_ROL"==this.$store.state.rol?a("v-list-group",{attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v("Almacen")])],1)]},proxy:!0}],null,!1,2320308321)},t._l(t.Almacen,(function(e,o){var i=e[0],s=e[1],n=e[2];return a("v-list-item",{key:o,attrs:{href:n,link:""}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(s)}})],1),a("router-link",{attrs:{to:n,replace:""},domProps:{textContent:t._s(i)}})],1)})),1):t._e(),"ADMIN_ROL"===this.$store.state.rol||"ALMACENISTA_ROL"==this.$store.state.rol?a("v-list-group",{attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v("Compras")])],1)]},proxy:!0}],null,!1,2048388409)},t._l(t.Compras,(function(e,o){var i=e[0],s=e[1],n=e[2];return a("v-list-item",{key:o,attrs:{href:n,link:""}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(s)}})],1),a("router-link",{attrs:{to:n,replace:""},domProps:{textContent:t._s(i)}})],1)})),1):t._e(),"ADMIN_ROL"===this.$store.state.rol||"VENDEDOR_ROL"===this.$store.state.rol?a("v-list-group",{attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v("Ventas")])],1)]},proxy:!0}],null,!1,1992046867)},t._l(t.Ventas,(function(e,o){var i=e[0],s=e[1],n=e[2];return a("v-list-item",{key:o,attrs:{href:n,link:""}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(s)}})],1),a("router-link",{attrs:{to:n,replace:""},domProps:{textContent:t._s(i)}})],1)})),1):t._e(),"ADMIN_ROL"===this.$store.state.rol?a("v-list-group",{attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[a("v-list-item-content",[a("v-list-item-title",[t._v("Accesos")])],1)]},proxy:!0}],null,!1,4093318851)},t._l(t.Accesos,(function(e,o){var i=e[0],s=e[1],n=e[2];return a("v-list-item",{key:o,attrs:{href:n,replace:"",link:""}},[a("v-list-item-icon",[a("v-icon",{domProps:{textContent:t._s(s)}})],1),a("router-link",{attrs:{to:n,replace:""},domProps:{textContent:t._s(i)}})],1)})),1):t._e()],1)],1),a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("v-app-bar-nav-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("span",[t._v(t._s(this.$router.currentRoute.name))]),a("v-spacer"),a("v-btn",{attrs:{to:"/login",replace:"",text:""},on:{click:t.logout}},[a("v-icon",[t._v("mdi-logout")]),a("span",{staticClass:"mr-2"},[t._v("Logout")])],1)],1),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1),a("v-footer",{attrs:{color:"primary",absolute:"",app:"",dark:""}},[a("v-row",{attrs:{justify:"center","no-gutters":""}},[t._v("DSNÂ©2021")])],1)],1)},c=[],d=(a("b0c0"),{data:function(){return{drawer:null,Almacen:[["Articulos","mdi-cart","/articulos"],["Categorias","mdi-sitemap","/categorias"]],Compras:[["Ingresos","mdi-store-plus","/ingresos"],["Proveedores","mdi-account-tie","/proveedores"]],Ventas:[["Ventas","mdi-store-plus","/ventas"],["Clientes","mdi-account-star","/clientes"]],Accesos:[["Usuarios","mdi-account-supervisor","/usuarios"]],Consultas:[["Compras","mdi-cart","/consulta-compras"],["Ventas","mdi-cart","/consulta-ventas"]]}},created:function(){this.checkToken()},methods:{logout:function(){sessionStorage.clear()},checkToken:function(){this.$store.state.token||"Login"===this.$router.currentRoute.name||this.$router.push("Login")}}}),u=d,m=(a("7749"),a("2877")),v=a("6544"),p=a.n(v),f=a("7496"),h=a("40dc"),b=a("5bc1"),I=a("8336"),x=a("a523"),g=a("ce7e"),k=a("553a"),_=a("132d"),C=a("8860"),D=a("56b0"),V=a("da13"),y=a("5d23"),T=a("34c3"),$=a("f6c4"),A=a("f774"),w=a("0fd9"),O=a("2fa4"),P=Object(m["a"])(u,l,c,!1,null,"29231cef",null),S=P.exports;p()(P,{VApp:f["a"],VAppBar:h["a"],VAppBarNavIcon:b["a"],VBtn:I["a"],VContainer:x["a"],VDivider:g["a"],VFooter:k["a"],VIcon:_["a"],VList:C["a"],VListGroup:D["a"],VListItem:V["a"],VListItemContent:y["a"],VListItemIcon:T["a"],VListItemTitle:y["b"],VMain:$["a"],VNavigationDrawer:A["a"],VRow:w["a"],VSpacer:O["a"]});var N=a("8c4f"),E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-app-bar",{attrs:{app:"",color:"primary"}}),a("v-card",{staticClass:"mx-auto mt-15 mb-0",attrs:{width:"600"}},[a("v-toolbar",{attrs:{color:"primary",dark:""}},[a("v-card-title",[t._v("Ingreso al sistema")])],1),a("v-card-text",[a("v-text-field",{attrs:{rules:t.emailRules,label:"E-mail",placeholder:"email@ejemplo.com",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{"append-icon":t.show1?"mdi-eye":"mdi-eye-off",rules:[t.rules.required,t.rules.min],type:t.show1?"text":"password",name:"input-10-1",label:"Password",hint:"At least 5 characters",counter:""},on:{"click:append":function(e){t.show1=!t.show1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-card-actions",[a("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v(" ingresar ")])],1)],1)],1)},j=[],R={data:function(){return{show1:!1,password:"Password",email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+/.test(t)||"E-mail must be valid"}],rules:{required:function(t){return!!t||"Required."},min:function(t){return t.length>=5||"Min 5 characters"},emailMatch:function(){return"The email and password you entered don't match"}}}},methods:{login:function(){var t=this;s.a.post("/usuario/login",{email:this.email,password:this.password}).then((function(e){t.$store.dispatch("setToken",e.data.token),t.$store.dispatch("setUsuario",e.data.usuario),t.$router.push("/")})).catch((function(t){console.error(t),alert(t.response.data.msg)}))}}},L=R,U=a("b0af"),q=a("99d9"),M=a("8654"),F=a("71d9"),B=Object(m["a"])(L,E,j,!1,null,null,null),K=B.exports;p()(B,{VAppBar:h["a"],VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VTextField:M["a"],VToolbar:F["a"]});var H=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},J=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("h1",{staticClass:"display-4 primary--text"},[t._v("WELCOME!")])])}],G={data:function(){return{drawer:null,items:[{title:"Home",icon:"mdi-view-dashboard"},{title:"About",icon:"mdi-forum"}]}},methods:{}},W=G,z=(a("cb7c"),Object(m["a"])(W,H,J,!1,null,"1fafd91e",null)),Q=z.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.articulos},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-btn",{staticClass:"mx-2",on:{click:t.crearPDF}},[a("v-icon",[t._v(" mdi-printer ")])],1),a("v-toolbar-title",[t._v("articulos")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ArtÃ­culo ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"10",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Codigo"},model:{value:t.editedItem.codigo,callback:function(e){t.$set(t.editedItem,"codigo",e)},expression:"editedItem.codigo"}})],1),a("v-col",{attrs:{cols:"12",sm:"10",md:"10"}},[a("v-autocomplete",{ref:"categorias",attrs:{items:t.categorias,"item-text":"nombre","item-value":"_id",label:"Categoria",placeholder:"Select...",required:""},model:{value:t.editedItem.categoria,callback:function(e){t.$set(t.editedItem,"categoria",e)},expression:"editedItem.categoria"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Stock",type:"number"},model:{value:t.editedItem.stock,callback:function(e){t.$set(t.editedItem,"stock",e)},expression:"editedItem.stock"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"precio",type:"number",prefix:"$"},model:{value:t.editedItem.precioVenta,callback:function(e){t.$set(t.editedItem,"precioVenta",e)},expression:"editedItem.precioVenta"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"descripcion"},model:{value:t.editedItem.descripcion,callback:function(e){t.$set(t.editedItem,"descripcion",e)},expression:"editedItem.descripcion"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[1==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar ArtÃ­culo?")]):t._e(),0==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Activar ArtÃ­culo?")]):t._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),1==o.estado?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle ")]):t._e(),0==o.estado?a("v-icon",{attrs:{small:"",color:"brown"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle-off ")]):t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[1==o.estado?a("span",{staticClass:"blue--text"},[t._v(" Activo ")]):a("span",{staticClass:"red--text"},[t._v(" Inactivo ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listarArticulos}},[t._v(" Reset ")])]},proxy:!0}])})},Y=[],Z=a("5530"),tt=(a("d81d"),a("8baf")),et=(a("0da4"),{data:function(){return{articulos:[],categorias:[],dialog:!1,dialogDelete:!1,headers:[{text:"Actions",value:"actions",sortable:!1},{text:"Codigo",value:"codigo"},{text:"Categoria",value:"categoria.nombre"},{text:"Nombre",value:"nombre"},{text:"Stock",value:"stock"},{text:"Precioventa",value:"precioVenta"},{text:"Descripcion",value:"descripcion"}],editedIndex:-1,editedItem:{codigo:"",categoria:"",nombre:"",stock:"",precioVenta:"",descripcion:""},defaultItem:{codigo:"",categoria:"",nombre:"",stock:"",precioVenta:"",descripcion:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo ArtÃ­culo":"Editar ArtÃ­culo"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.listarArticulos(),this.listarCategorias()},methods:{listarArticulos:function(){var t=this,e=this.$store.state.token;s.a.get("/articulo",{headers:{token:e}}).then((function(e){t.articulos=e.data.articulo})).catch((function(t){console.log(t)}))},listarCategorias:function(){var t=this,e=this.$store.state.token;s.a.get("/categoria",{headers:{token:e}}).then((function(e){t.categorias=e.data.categoria})).catch((function(t){console.log(t)}))},save:function(){var t=this;if(this.editedIndex>-1){var e=this.$store.state.token;s.a.put("/articulo/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarArticulos()})).catch((function(t){console.log(t)}))}else{var a=this.$store.state.token;s.a.post("/articulo",this.editedItem,{headers:{token:a}}).then((function(e){console.log(e.data),t.listarArticulos()})).catch((function(t){console.log(t)}))}this.close()},editItem:function(t){this.editedIndex=this.articulos.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.articulos.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialogDelete=!0},deleteItemConfirm:function(){0==this.editedItem.estado?this.activateItem():this.deactivateItem(),this.closeDelete()},activateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/articulo/activar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarArticulos()})).catch((function(t){console.log(t)}))},deactivateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/articulo/desactivar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarArticulos()})).catch((function(t){console.log(t)}))},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))},crearPDF:function(){var t=[{title:"Codigo",dataKey:"Codigo"},{title:"Categoria",dataKey:"Categoria"},{title:"Nombre",dataKey:"Nombre"},{title:"Stock",dataKey:"Stock"},{title:"Precio Venta",dataKey:"precioVenta"},{title:"Descripcion",dataKey:"Descripcion"}],e=[];this.articulos.map((function(t){e.push({Codigo:t.codigo,Categoria:t.categoria.nombre,Nombre:t.nombre,Stock:t.stock,precioVenta:t.precioVenta,Descripcion:t.descripcion})}));var a=new tt["default"]("p","pt");a.autoTable(t,e,{margin:{top:60},addPageContent:function(){a.text("Lista de Articulos",40,30)}}),a.save("Articulos.pdf")}}}),at=et,ot=a("c6a6"),it=a("62ad"),st=a("8fea"),nt=a("169a"),rt=a("2a7f"),lt=Object(m["a"])(at,X,Y,!1,null,null,null),ct=lt.exports;p()(lt,{VAutocomplete:ot["a"],VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VCol:it["a"],VContainer:x["a"],VDataTable:st["a"],VDialog:nt["a"],VDivider:g["a"],VIcon:_["a"],VRow:w["a"],VSpacer:O["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarTitle:rt["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.categorias},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Categorias")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nueva categorÃ­a ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Descripcion"},model:{value:t.editedItem.descripcion,callback:function(e){t.$set(t.editedItem,"descripcion",e)},expression:"editedItem.descripcion"}})],1),-1===t.editedIndex?a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Estado"},model:{value:t.editedItem.estado,callback:function(e){t.$set(t.editedItem,"estado",e)},expression:"editedItem.estado"}})],1):t._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[1==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Categoria?")]):t._e(),0==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Activar Categoria?")]):t._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),1==o.estado?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle ")]):t._e(),0==o.estado?a("v-icon",{attrs:{small:"",color:"brown"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle-off ")]):t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[1==o.estado?a("span",{staticClass:"blue--text"},[t._v(" Activo ")]):a("span",{staticClass:"red--text"},[t._v(" Inactivo ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listarCategorias}},[t._v(" Reset ")])]},proxy:!0}])})},ut=[],mt={data:function(){return{categorias:[],dialog:!1,dialogDelete:!1,headers:[{text:"Actions",value:"actions",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Descripcion",value:"descripcion"},{text:"Estado",value:"estado"}],editedIndex:-1,editedItem:{nombre:"",descripcion:"",estado:""},defaultItem:{nombre:"",descripcion:"",estado:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva Categoria":"Editar Categoria"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.listarCategorias()},methods:{listarCategorias:function(){var t=this,e=this.$store.state.token;s.a.get("/categoria",{headers:{token:e}}).then((function(e){t.categorias=e.data.categoria})).catch((function(t){console.log(t)}))},save:function(){var t=this;if(this.editedIndex>-1){var e=this.$store.state.token;s.a.put("/categoria/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarCategorias()})).catch((function(t){console.log(t)}))}else{var a=this.$store.state.token;s.a.post("/categoria",this.editedItem,{headers:{token:a}}).then((function(e){console.log(e.data),t.listarCategorias()})).catch((function(t){console.log(t)}))}this.close()},editItem:function(t){this.editedIndex=this.categorias.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.categorias.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialogDelete=!0},deleteItemConfirm:function(){0==this.editedItem.estado?this.activateItem():this.deactivateItem(),this.closeDelete()},activateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/categoria/activar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarCategorias()})).catch((function(t){console.log(t)}))},deactivateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/categoria/desactivar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarCategorias()})).catch((function(t){console.log(t)}))},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))}}},vt=mt,pt=Object(m["a"])(vt,dt,ut,!1,null,null,null),ft=pt.exports;p()(pt,{VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VCol:it["a"],VContainer:x["a"],VDataTable:st["a"],VDialog:nt["a"],VDivider:g["a"],VIcon:_["a"],VRow:w["a"],VSpacer:O["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarTitle:rt["a"]});var ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.compras},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Ingresos")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-autocomplete",{ref:"rol",attrs:{items:t.tipoComprobante,label:"Tipo Comprobante",disabled:t.isDisabled,placeholder:"Tipo Comprobante",required:""},model:{value:t.editedItem.tipoComprobante,callback:function(e){t.$set(t.editedItem,"tipoComprobante",e)},expression:"editedItem.tipoComprobante"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Serie Comprobante",disabled:t.isDisabled,type:"number"},model:{value:t.editedItem.serieComprobante,callback:function(e){t.$set(t.editedItem,"serieComprobante",e)},expression:"editedItem.serieComprobante"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"NÃºmero Comprobante",disabled:t.isDisabled,type:"number"},model:{value:t.editedItem.numComprobante,callback:function(e){t.$set(t.editedItem,"numComprobante",e)},expression:"editedItem.numComprobante"}})],1),a("v-col",{attrs:{cols:"8",sm:"8",md:"8"}},[a("v-autocomplete",{ref:"rol",attrs:{items:t.proveedores,"item-text":"nombre","item-value":"_id",label:"proveedores",disabled:t.isDisabled,placeholder:"proveedores",required:""},model:{value:t.editedItem.persona,callback:function(e){t.$set(t.editedItem,"persona",e)},expression:"editedItem.persona"}})],1),a("v-col",{attrs:{cols:"3",sm:"3",md:"3"}},[a("v-text-field",{attrs:{label:"Impuesto",disabled:t.isDisabled,type:"number",step:"0.1",suffix:"%",min:"0",max:"100",required:""},model:{value:t.editedItem.impuesto,callback:function(e){t.$set(t.editedItem,"impuesto",t._n(e))},expression:"editedItem.impuesto"}})],1),t.editedIndex<0?a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.agregar}},[t._v(" agregar articulo ")])],1):t._e(),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.detallesHeaders,items:t.editedItem.detalles},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Articulos")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0}])})],1)],1),a("p",[t._v("Total parcial: $"+t._s(t.totalParcial))]),a("p",[t._v("Total impuesto: $"+t._s(t.totalImpuesto))]),a("p",[t._v("Total neto: $"+t._s(t.totalNeto))])],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),t.editedIndex<0?a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[1==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar compra?")]):t._e(),0==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Activar compra?")]):t._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogArticulo,callback:function(e){t.dialogArticulo=e},expression:"dialogArticulo"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Agregar Articulo")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8",sm:"8",md:"8"}},[a("v-autocomplete",{ref:"articulos",attrs:{items:t.articulos,"item-text":"nombre","item-value":"_id",label:"Articulos",placeholder:"Articulos",required:""},on:{change:t.setArticleDetails},model:{value:t.articuloDetalle._id,callback:function(e){t.$set(t.articuloDetalle,"_id",e)},expression:"articuloDetalle._id"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Cantidad",type:"number"},model:{value:t.articuloDetalle.cantidad,callback:function(e){t.$set(t.articuloDetalle,"cantidad",t._n(e))},expression:"articuloDetalle.cantidad"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Precio",type:"number",suffix:"$",disabled:""},model:{value:t.articuloDetalle.precio,callback:function(e){t.$set(t.articuloDetalle,"precio",e)},expression:"articuloDetalle.precio"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Descuento",type:"number",step:"0.1",suffix:"%",min:"0",max:"100",required:""},model:{value:t.articuloDetalle.descuento,callback:function(e){t.$set(t.articuloDetalle,"descuento",t._n(e))},expression:"articuloDetalle.descuento"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialogArticulo=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addArticle}},[t._v(" Agregar ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),1==o.estado?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle ")]):t._e(),0==o.estado?a("v-icon",{attrs:{small:"",color:"brown"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle-off ")]):t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[1==o.estado?a("span",{staticClass:"blue--text"},[t._v(" Activo ")]):a("span",{staticClass:"red--text"},[t._v(" Inactivo ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listarCompras}},[t._v(" Reset ")])]},proxy:!0}])})},bt=[],It=(a("159b"),{data:function(){return{compras:[],articuloDetalle:{},articulos:[],proveedores:[],totalParcial:0,isDisabled:!1,tipoComprobante:["NOTA DEBITO","FACTURA","NOTA CREDITO"],dialog:!1,dialogArticulo:!1,dialogDelete:!1,headers:[{text:"Actions",value:"actions",sortable:!1},{text:"Usuario",value:"usuario.nombre"},{text:"Proveedor",value:"persona.nombre"},{text:"Tipo Comprobante",value:"tipoComprobante"},{text:"Serie Comprobante",value:"serieComprobante"},{text:"Numero Comprobante",value:"numComprobante"},{text:"Fecha",value:"createdAt"},{text:"Impuesto (%)",value:"impuesto"},{text:"Total",value:"total"},{text:"Estado",value:"estado"}],detallesHeaders:[{text:"articulo",value:"articulo"},{text:"cantidad",value:"cantidad"},{text:"precio",value:"precio"},{text:"descuento (%)",value:"descuento"}],editedIndex:-1,editedItem:{tipoComprobante:"",serieComprobante:"",numComprobante:"",persona:"",impuesto:"",detalles:[],total:""},defaultItem:{tipoComprobante:"",serieComprobante:"",numComprobante:"",persona:"",impuesto:"",detalles:[{_id:"",articulo:"",cantidad:"",precio:"",descuento:""}],total:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo":"Detalles"},totalImpuesto:function(){return this.totalParcial*(this.editedItem.impuesto/100)},totalNeto:function(){return this.totalParcial+this.totalImpuesto}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.listarCompras(),this.listarArticulos(),this.listarProveedores()},methods:{setArticleDetails:function(){var t=this;this.articulos.forEach((function(e){e._id===t.articuloDetalle._id&&(t.articuloDetalle.articulo=e.nombre,t.articuloDetalle.precio=e.precioVenta)}))},listarCompras:function(){var t=this,e=this.$store.state.token;s.a.get("/compra",{headers:{token:e}}).then((function(e){console.log(e.data),t.compras=e.data.compra})).catch((function(t){console.log(t)}))},listarArticulos:function(){var t=this,e=this.$store.state.token;s.a.get("/articulo",{headers:{token:e}}).then((function(e){t.articulos=e.data.articulo})).catch((function(t){console.log(t)}))},listarProveedores:function(){var t=this,e=this.$store.state.token;s.a.get("/persona/listProveedores",{headers:{token:e}}).then((function(e){t.proveedores=e.data.persona})).catch((function(t){console.log(t)}))},save:function(){var t=this;if(this.editedIndex>-1);else{this.editedItem.total=this.totalNeto,this.editedItem.usuario=this.$store.state.usuario._id;var e=this.$store.state.token;s.a.post("/compra",this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarCompras()})).catch((function(t){console.log(t)}))}this.close()},editItem:function(t){this.isDisabled=!0,this.editedIndex=this.compras.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialog=!0,this.totalParcial=this.editedItem.detalles.reduce((function(t,e){return t+(e.precio*e.cantidad-e.precio*(e.descuento/100))}),0)},deleteItem:function(t){this.editedIndex=this.compras.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialogDelete=!0},deleteItemConfirm:function(){0==this.editedItem.estado?this.activateItem():this.deactivateItem(),this.closeDelete()},activateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/compra/activar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarCompras()})).catch((function(t){console.log(t)}))},deactivateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/compra/desactivar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarCompras()})).catch((function(t){console.log(t)}))},agregar:function(){this.dialogArticulo=!0},addArticle:function(){this.editedItem.detalles.push(this.articuloDetalle),this.articuloDetalle={},this.dialogArticulo=!1,this.totalParcial=this.editedItem.detalles.reduce((function(t,e){return t+(e.precio*e.cantidad-e.precio*(e.descuento/100))}),0)},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1})),this.isDisabled=!1,this.totalParcial=0},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))}}}),xt=It,gt=(a("08b3"),Object(m["a"])(xt,ht,bt,!1,null,"283c9971",null)),kt=gt.exports;p()(gt,{VAutocomplete:ot["a"],VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VCol:it["a"],VContainer:x["a"],VDataTable:st["a"],VDialog:nt["a"],VDivider:g["a"],VIcon:_["a"],VRow:w["a"],VSpacer:O["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarTitle:rt["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.proveedores},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Proveedores")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo Proveedor ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-autocomplete",{ref:"categorias",attrs:{items:t.tipoDocumento,label:"Tipo de documento",placeholder:"Select...",required:""},model:{value:t.editedItem.tipoDocumento,callback:function(e){t.$set(t.editedItem,"tipoDocumento",e)},expression:"editedItem.tipoDocumento"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Numero de documento",type:"text"},model:{value:t.editedItem.numDocumento,callback:function(e){t.$set(t.editedItem,"numDocumento",e)},expression:"editedItem.numDocumento"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Direccion",type:"text"},model:{value:t.editedItem.direccion,callback:function(e){t.$set(t.editedItem,"direccion",e)},expression:"editedItem.direccion"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Telefono",type:"tel"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"E-mail",type:"email"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[1==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Persona?")]):t._e(),0==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Activar Persona?")]):t._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),1==o.estado?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle ")]):t._e(),0==o.estado?a("v-icon",{attrs:{small:"",color:"brown"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle-off ")]):t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[1==o.estado?a("span",{staticClass:"blue--text"},[t._v(" Activo ")]):a("span",{staticClass:"red--text"},[t._v(" Inactivo ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listarProveedores}},[t._v(" Reset ")])]},proxy:!0}])})},Ct=[],Dt={data:function(){return{proveedores:[],tipoDocumento:["CC","NIT","PASAPORTE","CE"],dialog:!1,dialogDelete:!1,headers:[{text:"Actions",value:"actions",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Tipo persona",value:"tipoPersona"},{text:"Tipo de documento",value:"tipoDocumento"},{text:"Numero de documento",value:"numDocumento"},{text:"Direccion",value:"direccion"},{text:"Telefono",value:"telefono"},{text:"E-mail",value:"email"},{text:"Estado",value:"estado"}],editedIndex:-1,editedItem:{nombre:"",tipoPersona:"",tipoDocumento:"",numDocumento:"",direccion:"",telefono:"",email:"",estado:""},defaultItem:{nombre:"",tipoPersona:"",tipoDocumento:"",numDocumento:"",direccion:"",telefono:"",email:"",estado:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo Proveedor":"Editar Proveedor"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.listarProveedores()},methods:{listarProveedores:function(){var t=this,e=this.$store.state.token;s.a.get("/persona/listProveedores",{headers:{token:e}}).then((function(e){t.proveedores=e.data.persona})).catch((function(t){console.log(t)}))},save:function(){var t=this;if(this.editedIndex>-1){var e=this.$store.state.token;s.a.put("/persona/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarProveedores()})).catch((function(t){console.log(t)}))}else{this.editedItem.tipoPersona="Proveedor";var a=this.$store.state.token;s.a.post("/persona",this.editedItem,{headers:{token:a}}).then((function(e){console.log(e.data),t.listarProveedores()})).catch((function(t){console.log(t)}))}this.close()},editItem:function(t){this.editedIndex=this.proveedores.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.proveedores.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialogDelete=!0},deleteItemConfirm:function(){0==this.editedItem.estado?this.activateItem():this.deactivateItem(),this.closeDelete()},activateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/persona/activar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarProveedores()})).catch((function(t){console.log(t)}))},deactivateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/persona/desactivar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarProveedores()})).catch((function(t){console.log(t)}))},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))}}},Vt=Dt,yt=Object(m["a"])(Vt,_t,Ct,!1,null,null,null),Tt=yt.exports;p()(yt,{VAutocomplete:ot["a"],VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VCol:it["a"],VContainer:x["a"],VDataTable:st["a"],VDialog:nt["a"],VDivider:g["a"],VIcon:_["a"],VRow:w["a"],VSpacer:O["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarTitle:rt["a"]});var $t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.ventas},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Ventas")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-autocomplete",{ref:"rol",attrs:{items:t.tipoComprobante,label:"Tipo Comprobante",disabled:t.isDisabled,placeholder:"Tipo Comprobante",required:""},model:{value:t.editedItem.tipoComprobante,callback:function(e){t.$set(t.editedItem,"tipoComprobante",e)},expression:"editedItem.tipoComprobante"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Serie Comprobante",disabled:t.isDisabled,type:"number"},model:{value:t.editedItem.serieComprobante,callback:function(e){t.$set(t.editedItem,"serieComprobante",e)},expression:"editedItem.serieComprobante"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"NÃºmero Comprobante",disabled:t.isDisabled,type:"number"},model:{value:t.editedItem.numComprobante,callback:function(e){t.$set(t.editedItem,"numComprobante",e)},expression:"editedItem.numComprobante"}})],1),a("v-col",{attrs:{cols:"8",sm:"8",md:"8"}},[a("v-autocomplete",{ref:"rol",attrs:{items:t.clientes,"item-text":"nombre","item-value":"_id",label:"Clientes",disabled:t.isDisabled,placeholder:"Clientes",required:""},model:{value:t.editedItem.persona,callback:function(e){t.$set(t.editedItem,"persona",e)},expression:"editedItem.persona"}})],1),a("v-col",{attrs:{cols:"3",sm:"3",md:"3"}},[a("v-text-field",{attrs:{label:"Impuesto",disabled:t.isDisabled,type:"number",step:"0.1",suffix:"%",min:"0",max:"100",required:""},model:{value:t.editedItem.impuesto,callback:function(e){t.$set(t.editedItem,"impuesto",t._n(e))},expression:"editedItem.impuesto"}})],1),t.editedIndex<0?a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.agregar}},[t._v(" agregar articulo ")])],1):t._e(),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.detallesHeaders,items:t.editedItem.detalles},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Articulos")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}})],1)]},proxy:!0}])})],1)],1),a("p",[t._v("Total parcial: $"+t._s(t.totalParcial))]),a("p",[t._v("Total impuesto: $"+t._s(t.totalImpuesto))]),a("p",[t._v("Total neto: $"+t._s(t.totalNeto))])],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),t.editedIndex<0?a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")]):t._e()],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[1==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar venta?")]):t._e(),0==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Activar venta?")]):t._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogArticulo,callback:function(e){t.dialogArticulo=e},expression:"dialogArticulo"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Agregar Articulo")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"8",sm:"8",md:"8"}},[a("v-autocomplete",{ref:"articulos",attrs:{items:t.articulos,"item-text":"nombre","item-value":"_id",label:"Articulos",placeholder:"Articulos",required:""},on:{change:t.setArticleDetails},model:{value:t.articuloDetalle._id,callback:function(e){t.$set(t.articuloDetalle,"_id",e)},expression:"articuloDetalle._id"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Cantidad",type:"number"},model:{value:t.articuloDetalle.cantidad,callback:function(e){t.$set(t.articuloDetalle,"cantidad",t._n(e))},expression:"articuloDetalle.cantidad"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Precio",type:"number",suffix:"$",disabled:""},model:{value:t.articuloDetalle.precio,callback:function(e){t.$set(t.articuloDetalle,"precio",e)},expression:"articuloDetalle.precio"}})],1),a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Descuento",type:"number",step:"0.1",suffix:"%",min:"0",max:"100",required:""},model:{value:t.articuloDetalle.descuento,callback:function(e){t.$set(t.articuloDetalle,"descuento",t._n(e))},expression:"articuloDetalle.descuento"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:function(e){t.dialogArticulo=!1}}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.addArticle}},[t._v(" Agregar ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),1==o.estado?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle ")]):t._e(),0==o.estado?a("v-icon",{attrs:{small:"",color:"brown"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle-off ")]):t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[1==o.estado?a("span",{staticClass:"blue--text"},[t._v(" Activo ")]):a("span",{staticClass:"red--text"},[t._v(" Inactivo ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listarVentas}},[t._v(" Reset ")])]},proxy:!0}])})},At=[],wt={data:function(){return{ventas:[],articuloDetalle:{},articulos:[],clientes:[],totalParcial:0,isDisabled:!1,tipoComprobante:["NOTA DEBITO","FACTURA","NOTA CREDITO"],dialog:!1,dialogArticulo:!1,dialogDelete:!1,headers:[{text:"Actions",value:"actions",sortable:!1},{text:"Usuario",value:"usuario.nombre"},{text:"Cliente",value:"persona.nombre"},{text:"Tipo Comprobante",value:"tipoComprobante"},{text:"Serie Comprobante",value:"serieComprobante"},{text:"Numero Comprobante",value:"numComprobante"},{text:"Fecha",value:"createdAt"},{text:"Impuesto (%)",value:"impuesto"},{text:"Total",value:"total"},{text:"Estado",value:"estado"}],detallesHeaders:[{text:"articulo",value:"articulo"},{text:"cantidad",value:"cantidad"},{text:"precio",value:"precio"},{text:"descuento (%)",value:"descuento"}],editedIndex:-1,editedItem:{tipoComprobante:"",serieComprobante:"",numComprobante:"",persona:"",impuesto:"",detalles:[],total:""},defaultItem:{tipoComprobante:"",serieComprobante:"",numComprobante:"",persona:"",impuesto:"",detalles:[{_id:"",articulo:"",cantidad:"",precio:"",descuento:""}],total:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo":"Detalles"},totalImpuesto:function(){return this.totalParcial*(this.editedItem.impuesto/100)},totalNeto:function(){return this.totalParcial+this.totalImpuesto}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.listarVentas(),this.listarArticulos(),this.listarClientes()},methods:{setArticleDetails:function(){var t=this;this.articulos.forEach((function(e){e._id===t.articuloDetalle._id&&(t.articuloDetalle.articulo=e.nombre,t.articuloDetalle.precio=e.precioVenta)}))},listarVentas:function(){var t=this,e=this.$store.state.token;s.a.get("/venta",{headers:{token:e}}).then((function(e){console.log(e.data),t.ventas=e.data.venta})).catch((function(t){console.log(t)}))},listarArticulos:function(){var t=this,e=this.$store.state.token;s.a.get("/articulo",{headers:{token:e}}).then((function(e){t.articulos=e.data.articulo})).catch((function(t){console.log(t)}))},listarClientes:function(){var t=this,e=this.$store.state.token;s.a.get("/persona/listClientes",{headers:{token:e}}).then((function(e){t.clientes=e.data.persona})).catch((function(t){console.log(t)}))},save:function(){var t=this;if(this.editedIndex>-1);else{this.editedItem.total=this.totalNeto,this.editedItem.usuario=this.$store.state.usuario._id;var e=this.$store.state.token;s.a.post("/venta",this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarVentas()})).catch((function(t){console.log(t)}))}this.close()},editItem:function(t){this.isDisabled=!0,this.editedIndex=this.ventas.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialog=!0,this.totalParcial=this.editedItem.detalles.reduce((function(t,e){return t+(e.precio*e.cantidad-e.precio*(e.descuento/100))}),0)},deleteItem:function(t){this.editedIndex=this.ventas.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialogDelete=!0},deleteItemConfirm:function(){0==this.editedItem.estado?this.activateItem():this.deactivateItem(),this.closeDelete()},activateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/venta/activar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarVentas()})).catch((function(t){console.log(t)}))},deactivateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/venta/desactivar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarVentas()})).catch((function(t){console.log(t)}))},agregar:function(){this.dialogArticulo=!0},addArticle:function(){this.editedItem.detalles.push(this.articuloDetalle),this.articuloDetalle={},this.dialogArticulo=!1,this.totalParcial=this.editedItem.detalles.reduce((function(t,e){return t+(e.precio*e.cantidad-e.precio*(e.descuento/100))}),0)},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1})),this.isDisabled=!1,this.totalParcial=0},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))}}},Ot=wt,Pt=(a("40e1"),Object(m["a"])(Ot,$t,At,!1,null,"5ed50bda",null)),St=Pt.exports;p()(Pt,{VAutocomplete:ot["a"],VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VCol:it["a"],VContainer:x["a"],VDataTable:st["a"],VDialog:nt["a"],VDivider:g["a"],VIcon:_["a"],VRow:w["a"],VSpacer:O["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarTitle:rt["a"]});var Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.clientes},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Clientes")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo Cliente ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-autocomplete",{ref:"categorias",attrs:{items:t.tipoDocumento,label:"Tipo de documento",placeholder:"Select...",required:""},model:{value:t.editedItem.tipoDocumento,callback:function(e){t.$set(t.editedItem,"tipoDocumento",e)},expression:"editedItem.tipoDocumento"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Numero de documento",type:"text"},model:{value:t.editedItem.numDocumento,callback:function(e){t.$set(t.editedItem,"numDocumento",e)},expression:"editedItem.numDocumento"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Direccion",type:"text"},model:{value:t.editedItem.direccion,callback:function(e){t.$set(t.editedItem,"direccion",e)},expression:"editedItem.direccion"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Telefono",type:"tel"},model:{value:t.editedItem.telefono,callback:function(e){t.$set(t.editedItem,"telefono",e)},expression:"editedItem.telefono"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"E-mail",type:"email"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[1==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Persona?")]):t._e(),0==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Activar Persona?")]):t._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),1==o.estado?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle ")]):t._e(),0==o.estado?a("v-icon",{attrs:{small:"",color:"brown"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle-off ")]):t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[1==o.estado?a("span",{staticClass:"blue--text"},[t._v(" Activo ")]):a("span",{staticClass:"red--text"},[t._v(" Inactivo ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listarClientes}},[t._v(" Reset ")])]},proxy:!0}])})},Et=[],jt={data:function(){return{clientes:[],tipoDocumento:["CC","NIT","PASAPORTE","CE"],dialog:!1,dialogDelete:!1,headers:[{text:"Actions",value:"actions",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Tipo persona",value:"tipoPersona"},{text:"Tipo de documento",value:"tipoDocumento"},{text:"Numero de documento",value:"numDocumento"},{text:"Direccion",value:"direccion"},{text:"Telefono",value:"telefono"},{text:"E-mail",value:"email"},{text:"Estado",value:"estado"}],editedIndex:-1,editedItem:{nombre:"",tipoPersona:"",tipoDocumento:"",numDocumento:"",direccion:"",telefono:"",email:"",estado:""},defaultItem:{nombre:"",tipoPersona:"",tipoDocumento:"",numDocumento:"",direccion:"",telefono:"",email:"",estado:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo Cliente":"Editar Cliente"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.listarClientes()},methods:{listarClientes:function(){var t=this,e=this.$store.state.token;s.a.get("/persona/listClientes",{headers:{token:e}}).then((function(e){t.clientes=e.data.persona})).catch((function(t){console.log(t)}))},save:function(){var t=this;if(this.editedIndex>-1){var e=this.$store.state.token;s.a.put("/persona/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarClientes()})).catch((function(t){console.log(t)}))}else{this.editedItem.tipoPersona="Cliente";var a=this.$store.state.token;s.a.post("/persona",this.editedItem,{headers:{token:a}}).then((function(e){console.log(e.data),t.listarClientes()})).catch((function(t){console.log(t)}))}this.close()},editItem:function(t){this.editedIndex=this.clientes.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.clientes.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialogDelete=!0},deleteItemConfirm:function(){0==this.editedItem.estado?this.activateItem():this.deactivateItem(),this.closeDelete()},activateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/persona/activar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarClientes()})).catch((function(t){console.log(t)}))},deactivateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/persona/desactivar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarClientes()})).catch((function(t){console.log(t)}))},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))}}},Rt=jt,Lt=Object(m["a"])(Rt,Nt,Et,!1,null,null,null),Ut=Lt.exports;p()(Lt,{VAutocomplete:ot["a"],VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VCol:it["a"],VContainer:x["a"],VDataTable:st["a"],VDialog:nt["a"],VDivider:g["a"],VIcon:_["a"],VRow:w["a"],VSpacer:O["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarTitle:rt["a"]});var qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.usuarios},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("Usuarios")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),o),[t._v(" Nuevo Usuario ")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{attrs:{label:"Nombre"},model:{value:t.editedItem.nombre,callback:function(e){t.$set(t.editedItem,"nombre",e)},expression:"editedItem.nombre"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-autocomplete",{ref:"rol",attrs:{items:t.roles,label:"Rol",placeholder:"Select rol",required:""},model:{value:t.editedItem.rol,callback:function(e){t.$set(t.editedItem,"rol",e)},expression:"editedItem.rol"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"E-mail",type:"email"},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v(" Save ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[a("v-card",[1==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Desactivar Usuario?")]):t._e(),0==t.editedItem.estado?a("v-card-title",{staticClass:"headline"},[t._v("Activar Usuario?")]):t._e(),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("Cancel")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(o)}}},[t._v(" mdi-pencil ")]),1==o.estado?a("v-icon",{attrs:{small:"",color:"red"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle ")]):t._e(),0==o.estado?a("v-icon",{attrs:{small:"",color:"brown"},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-minus-circle-off ")]):t._e()]}},{key:"item.estado",fn:function(e){var o=e.item;return[1==o.estado?a("span",{staticClass:"blue--text"},[t._v(" Activo ")]):a("span",{staticClass:"red--text"},[t._v(" Inactivo ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.listarUsuarios}},[t._v(" Reset ")])]},proxy:!0}])})},Mt=[],Ft={data:function(){return{usuarios:[],roles:["ADMIN_ROL","VENDEDOR_ROL","ALMACENISTA_ROL"],dialog:!1,dialogDelete:!1,password:"",headers:[{text:"Actions",value:"actions",sortable:!1},{text:"Nombre",value:"nombre"},{text:"Rol",value:"rol"},{text:"E-mail",value:"email"},{text:"Estado",value:"estado"}],editedIndex:-1,editedItem:{nombre:"",email:"",rol:"",password:""},defaultItem:{nombre:"",email:"",rol:"",password:""}}},computed:{formTitle:function(){return-1===this.editedIndex?"Nuevo Usuario":"Editar Usuario"}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()}},created:function(){this.listarUsuarios()},methods:{listarUsuarios:function(){var t=this,e=this.$store.state.token;s.a.get("/usuario",{headers:{token:e}}).then((function(e){console.log(e.data),t.usuarios=e.data.usuario})).catch((function(t){console.log(t)}))},save:function(){var t=this;if(this.editedIndex>-1){this.password&&(this.editedItem.password=this.password);var e=this.$store.state.token;s.a.put("/usuario/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarUsuarios()})).catch((function(t){console.log(t)}))}else{var a=this.$store.state.token;this.editedItem.password=this.password,s.a.post("/usuario",this.editedItem,{headers:{token:a}}).then((function(e){console.log(e.data),t.listarUsuarios()})).catch((function(t){console.log(t)}))}this.close()},editItem:function(t){this.editedIndex=this.usuarios.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.usuarios.indexOf(t),this.editedItem=Object(Z["a"])({},t),this.dialogDelete=!0},deleteItemConfirm:function(){0==this.editedItem.estado?this.activateItem():this.deactivateItem(),this.closeDelete()},activateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/usuario/activar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarUsuarios()})).catch((function(t){console.log(t)}))},deactivateItem:function(){var t=this,e=this.$store.state.token;s.a.put("/usuario/desactivar/".concat(this.editedItem._id),this.editedItem,{headers:{token:e}}).then((function(e){console.log(e.data),t.listarUsuarios()})).catch((function(t){console.log(t)}))},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object(Z["a"])({},t.defaultItem),t.editedIndex=-1}))}}},Bt=Ft,Kt=Object(m["a"])(Bt,qt,Mt,!1,null,null,null),Ht=Kt.exports;p()(Kt,{VAutocomplete:ot["a"],VBtn:I["a"],VCard:U["a"],VCardActions:q["a"],VCardText:q["b"],VCardTitle:q["c"],VCol:it["a"],VContainer:x["a"],VDataTable:st["a"],VDialog:nt["a"],VDivider:g["a"],VIcon:_["a"],VRow:w["a"],VSpacer:O["a"],VTextField:M["a"],VToolbar:F["a"],VToolbarTitle:rt["a"]}),o["a"].use(N["a"]);var Jt=[{path:"/login",name:"Login",component:K},{path:"/",name:"Home",component:Q},{path:"/articulos",name:"Articulos",component:ct},{path:"/categorias",name:"Categorias",component:ft},{path:"/ingresos",name:"Ingresos",component:kt},{path:"/proveedores",name:"Proveedores",component:Tt},{path:"/ventas",name:"Ventas",component:St},{path:"/clientes",name:"Clientes",component:Ut},{path:"/usuarios",name:"Usuarios",component:Ht}],Gt=new N["a"]({mode:"history",base:"/",routes:Jt}),Wt=Gt,zt=a("2f62"),Qt=a("0e44");o["a"].use(zt["a"]);var Xt=new zt["a"].Store({plugins:[Object(Qt["a"])({storage:window.sessionStorage})],state:{token:"",rol:"",usuario:{}},mutations:{setToken:function(t,e){t.token=e},setUsuario:function(t,e){t.rol=e.rol,t.usuario=e}},actions:{setToken:function(t,e){t.commit("setToken",e)},setUsuario:function(t,e){t.commit("setUsuario",e)}},getters:{},modules:{}}),Yt=a("f309");o["a"].use(Yt["a"]);var Zt=new Yt["a"]({});o["a"].config.productionTip=!1,s.a.defaults.baseURL="/api",new o["a"]({router:Wt,store:Xt,vuetify:Zt,render:function(t){return t(S)}}).$mount("#app"),o["a"].use(r.a,s.a)},7749:function(t,e,a){"use strict";a("3d1b")},"973f":function(t,e,a){},cb7c:function(t,e,a){"use strict";a("e972")},e972:function(t,e,a){}});
//# sourceMappingURL=app.38838a09.js.map